<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>(t,i,x,y) => "Gif Maker"</title><style>html{background-color:#000;color:#fff;height:100%}*{box-sizing:border-box}#editor label.comment,a:link,a:visited{color:#f24}*,html,input{font-family:monospace;font-size:14px}body{padding:0;margin:0;display:grid;align-items:center;justify-items:center;height:100%}#editor.over-limit.focus label.limit-warning,input,label{display:block}#output{width:400px}#code-runner,#editor.over-limit.focus label.second{display:none}#editor{display:block;width:271px;line-height:1.15em}#editor #duration,#editor #input{background:0 0;color:#fff;padding:0;margin:.15em 0;border:0;width:100%}#editor #duration:focus,#editor #input:focus{outline:0}#editor button{margin-top:.5em}#editor.over-limit #input{background:#f24;color:#fff}</style></head><body> <canvas id="output"></canvas> <form id="editor"> <label class="comment" for="input">// tixy gif generator</label> <input name="code" id="input" type="text" value="Math.sin(y/8+t)" autocomplete="off" autocapitalize="off" spellcheck="false" autocorrect="off"> <label class="comment" for="duration">// duration (s)</label> <input name="duration" id="duration" type="number" value="4" step="0.02" autocomplete="off" autocapitalize="off" spellcheck="false" autocorrect="off"> <button type="submit">create gif</button> </form> <script id="worker" src="/gif.worker.7ed5890a.js"></script> <script>parcelRequire=function(e,t,r,n){var i,s="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function a(r,n){if(!t[r]){if(!e[r]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(r,!0);if(s)return s(r,!0);if(o&&"string"==typeof r)return o(r);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}u.resolve=function(t){return e[r][1][t]||t},u.cache={};var l=t[r]=new a.Module(r);e[r][0].call(l.exports,u,l,l.exports,this)}return t[r].exports;function u(e){return a(u.resolve(e))}}a.isParcelRequire=!0,a.Module=function(e){this.id=e,this.bundle=a,this.exports={}},a.modules=e,a.cache=t,a.parent=s,a.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]};for(var h=0;h<r.length;h++)try{a(r[h])}catch(e){i||(i=e)}if(r.length){var l=a(r[r.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd&&define(function(){return l})}if(parcelRequire=a,i)throw i;return a}({Ng54:[function(e,t,r){var n,i;n=this,i=function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){var n,i,s={}.hasOwnProperty,o=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};n=r(1).EventEmitter,r(2),i=function(e){function t(e){var t,n,i;for(n in this.running=!1,this.options={},this.frames=[],this.groups=new Map,this.freeWorkers=[],this.activeWorkers=[],this.setOptions(e),r)i=r[n],null==(t=this.options)[n]&&(t[n]=i)}var r,n;return function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),r={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1},n={delay:500,copy:!1},t.prototype.setOption=function(e,t){if(this.options[e]=t,null!=this._canvas&&("width"===e||"height"===e))return this._canvas[e]=t},t.prototype.setOptions=function(e){var t,r,n;for(t in r=[],e)s.call(e,t)&&(n=e[t],r.push(this.setOption(t,n)));return r},t.prototype.addFrame=function(e,t){var r,i,s;for(s in null==t&&(t={}),(r={}).transparent=this.options.transparent,n)r[s]=t[s]||n[s];if(null==this.options.width&&this.setOption("width",e.width),null==this.options.height&&this.setOption("height",e.height),"undefined"!=typeof ImageData&&null!==ImageData&&e instanceof ImageData)r.data=e.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&e instanceof WebGLRenderingContext)t.copy?r.data=this.getContextData(e):r.context=e;else{if(null==e.childNodes)throw new Error("Invalid image");t.copy?r.data=this.getImageData(e):r.image=e}return(i=this.frames.length)>0&&r.data&&(this.groups.has(r.data)?this.groups.get(r.data).push(i):this.groups.set(r.data,[i])),this.frames.push(r)},t.prototype.render=function(){var e,t,r;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var e,t,r;for(r=[],e=0,t=this.frames.length;0<=t?e<t:e>t;0<=t?++e:--e)r.push(null);return r}.call(this),t=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(e=0,r=t;0<=r?e<r:e>r;0<=r?++e:--e)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},t.prototype.abort=function(){for(var e;null!=(e=this.activeWorkers.shift());)this.log("killing active worker"),e.terminate();return this.running=!1,this.emit("abort")},t.prototype.spawnWorkers=function(){var e,t,r;return e=Math.min(this.options.workers,this.frames.length),function(){r=[];for(var n=t=this.freeWorkers.length;t<=e?n<e:n>e;t<=e?n++:n--)r.push(n);return r}.apply(this).forEach(function(e){return function(t){var r;return e.log("spawning worker "+t),(r=new Worker(e.options.workerScript)).onmessage=function(t){return e.activeWorkers.splice(e.activeWorkers.indexOf(r),1),e.freeWorkers.push(r),e.frameFinished(t.data,!1)},e.freeWorkers.push(r)}}(this)),e},t.prototype.frameFinished=function(e,t){var r,n,i,s;if(this.finishedFrames++,t?(r=this.frames.indexOf(e),n=this.groups.get(e.data)[0],this.log("frame "+(r+1)+" is duplicate of "+n+" - "+this.activeWorkers.length+" active"),this.imageParts[r]={indexOfFirstInGroup:n}):(this.log("frame "+(e.index+1)+" finished - "+this.activeWorkers.length+" active"),this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[e.index]=e),!0===this.options.globalPalette&&!t&&(this.options.globalPalette=e.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(i=1,s=this.freeWorkers.length;1<=s?i<s:i>s;1<=s?++i:--i)this.renderNextFrame();return o.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},t.prototype.finishRendering=function(){var e,t,r,n,i,s,o,a,h,l,u,f,p,c,d,g,m,v,y,w;for(i=s=0,l=(m=this.imageParts).length;s<l;i=++s)(t=m[i]).indexOfFirstInGroup&&(this.imageParts[i]=this.imageParts[t.indexOfFirstInGroup]);for(h=0,o=0,u=(v=this.imageParts).length;o<u;o++)h+=((t=v[o]).data.length-1)*t.pageSize+t.cursor;for(h+=t.pageSize-t.cursor,this.log("rendering finished - filesize "+Math.round(h/1e3)+"kb"),e=new Uint8Array(h),d=0,a=0,f=(y=this.imageParts).length;a<f;a++)for(r=c=0,p=(w=(t=y[a]).data).length;c<p;r=++c)g=w[r],e.set(g,d),d+=r===t.data.length-1?t.cursor:t.pageSize;return n=new Blob([e],{type:"image/gif"}),this.emit("finished",n,e)},t.prototype.renderNextFrame=function(){var e,t,r,n;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return e=this.frames[this.nextFrame++],(t=this.frames.indexOf(e))>0&&this.groups.has(e.data)&&this.groups.get(e.data)[0]!==t?void setTimeout(function(t){return function(){return t.frameFinished(e,!0)}}(this),0):(n=this.freeWorkers.shift(),r=this.getTask(e),this.log("starting frame "+(r.index+1)+" of "+this.frames.length),this.activeWorkers.push(n),n.postMessage(r))},t.prototype.getContextData=function(e){return e.getImageData(0,0,this.options.width,this.options.height).data},t.prototype.getImageData=function(e){var t;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(t=this._canvas.getContext("2d")).setFill=this.options.background,t.fillRect(0,0,this.options.width,this.options.height),t.drawImage(e,0,0),this.getContextData(t)},t.prototype.getTask=function(e){var t,r;if(r={index:t=this.frames.indexOf(e),last:t===this.frames.length-1,delay:e.delay,transparent:e.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:!0},null!=e.data)r.data=e.data;else if(null!=e.context)r.data=this.getContextData(e.context);else{if(null==e.image)throw new Error("Invalid frame");r.data=this.getImageData(e.image)}return r},t.prototype.log=function(e){if(this.options.debug)return console.log(e)},t}(n),e.exports=i},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,a,h,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(s(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(i(r))for(a=Array.prototype.slice.call(arguments,1),o=(l=r.slice()).length,h=0;h<o;h++)l[h].apply(this,a);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,s,o,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,s=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(a=o;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){s=a;break}if(s<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){var r,n,i,s,o;o=navigator.userAgent.toLowerCase(),s=navigator.platform.toLowerCase(),i="ie"===(r=o.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(n={name:"version"===r[1]?r[3]:r[1],version:i||parseFloat("opera"===r[1]&&r[4]?r[4]:r[2]),platform:{name:o.match(/ip(?:ad|od|hone)/)?"ios":(o.match(/(?:webos|android)/)||s.match(/mac|win|linux/)||["other"])[0]}})[n.name]=!0,n[n.name+parseInt(n.version,10)]=!0,n.platform[n.platform.name]=!0,e.exports=n}])},"object"==typeof r&&"object"==typeof t?t.exports=i():"object"==typeof r?r.GIF=i():n.GIF=i()},{}],apuI:[function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(e("gif.js.optimized"));var i=16,s=48,o=3,a=4*s,h=i*(s+o)+2*a,l=document.getElementById("worker").src,u=document.getElementById("output"),f=document.getElementById("editor"),p=document.getElementById("input"),c=document.getElementById("duration"),d=u.getContext("2d"),g=new URL(document.location);function m(){var e=new n.default({workerScript:l,workers:4,quality:100,background:"#000000",width:h,height:h}),t=p.value,r=c.value;g.searchParams.set("code",t),g.searchParams.set("duration",r),history.replaceState(null,t,g);var m=new Function("t","i","x","y","\n    try {\n      with (Math) {\n        return ".concat(t,";\n      }\n    } catch (error) {\n      return error;\n    }\n  ")),v=0;function y(){d.fillStyle="#000",d.fillRect(0,0,h,h);for(var t=0,r=0;r<i;r++)for(var n=0;n<i;n++){var l=Number(m(v,t,n,r)),u=s/2,f="#FFF",p=l*s/2;p<0&&(p=-p,f="#F24"),p>s/2&&(p=s/2),d.beginPath(),d.fillStyle=f,d.arc(n*(s+o)+u+a,r*(s+o)+u+a,p,0,2*Math.PI),d.fill(),t++}e.addFrame(d,{copy:!0,delay:20})}for(u.width=u.height=h;v<r;)y(),v+=.02;new Date,e.on("finished",function(e){var t=document.createElement("a");t.download="tixy.gif",t.href=URL.createObjectURL(e),t.click(),document.location=URL.createObjectURL(e)}),e.on("abort",function(){console.log("abort",arguments)}),e.on("progress",function(e){f.innerText="exporting ".concat(Math.round(100*e),"%")}),e.render()}g.searchParams.has("code")&&(p.value=g.searchParams.get("code")),g.searchParams.has("duration")&&(c.value=g.searchParams.get("duration")),f.addEventListener("submit",function(e){e.preventDefault(),f.innerText="rendering ...",setTimeout(m,300)})},{"gif.js.optimized":"Ng54"}]},{},["apuI"]);</script> </body></html>